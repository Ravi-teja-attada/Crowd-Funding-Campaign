(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[414],{1369:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/campaigns/requests/list",function(){return r(6878)}])},6878:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return D}});var n=r(7568),s=r(655),a=r(5893),l=r(7294),i=r(7462),c=r(3871),o=r(6010),d=r(8459),u=r(8935),p=r(2519),h=r(2248);function f(e){var t=e.children,r=e.className,n=(0,o.Z)(r),s=(0,u.Z)(f,e),a=(0,p.Z)(f,e);return l.createElement(a,(0,i.Z)({},s,{className:n}),t)}f.handledProps=["as","children","className"],f.defaultProps={as:"tbody"},f.propTypes={};var v=f,m=r(9591),g=r(5150);function Z(e){var t=e.active,r=e.children,n=e.className,s=e.collapsing,a=e.content,c=e.disabled,f=e.error,v=e.icon,m=e.negative,x=e.positive,b=e.selectable,w=e.singleLine,G=e.textAlign,j=e.verticalAlign,N=e.warning,A=e.width,y=(0,o.Z)((0,d.lG)(t,"active"),(0,d.lG)(s,"collapsing"),(0,d.lG)(c,"disabled"),(0,d.lG)(f,"error"),(0,d.lG)(m,"negative"),(0,d.lG)(x,"positive"),(0,d.lG)(b,"selectable"),(0,d.lG)(w,"single line"),(0,d.lG)(N,"warning"),(0,d.X4)(G),(0,d.Ok)(j),(0,d.H0)(A,"wide"),n),k=(0,u.Z)(Z,e),P=(0,p.Z)(Z,e);return h.kK(r)?l.createElement(P,(0,i.Z)({},k,{className:y}),g.Z.create(v),a):l.createElement(P,(0,i.Z)({},k,{className:y}),r)}Z.handledProps=["active","as","children","className","collapsing","content","disabled","error","icon","negative","positive","selectable","singleLine","textAlign","verticalAlign","warning","width"],Z.defaultProps={as:"td"},Z.propTypes={},Z.create=(0,m.u5)(Z,(function(e){return{content:e}}));var x=Z;function b(e){var t=e.children,r=e.className,n=e.content,s=e.fullWidth,a=(0,o.Z)((0,d.lG)(s,"full-width"),r),c=(0,u.Z)(b,e),f=(0,p.Z)(b,e);return l.createElement(f,(0,i.Z)({},c,{className:a}),h.kK(t)?n:t)}b.handledProps=["as","children","className","content","fullWidth"],b.defaultProps={as:"thead"},b.propTypes={};var w=b;function G(e){var t=e.as,r=(0,u.Z)(G,e);return l.createElement(w,(0,i.Z)({},r,{as:t}))}G.handledProps=["as"],G.propTypes={},G.defaultProps={as:"tfoot"};var j=G;function N(e){var t=e.as,r=e.className,n=e.sorted,s=(0,o.Z)((0,d.cD)(n,"sorted"),r),a=(0,u.Z)(N,e);return l.createElement(x,(0,i.Z)({},a,{as:t,className:s}))}N.handledProps=["as","className","sorted"],N.propTypes={},N.defaultProps={as:"th"};var A=N;function y(e){var t=e.active,r=e.cellAs,n=e.cells,s=e.children,a=e.className,f=e.disabled,v=e.error,m=e.negative,g=e.positive,Z=e.textAlign,b=e.verticalAlign,w=e.warning,G=(0,o.Z)((0,d.lG)(t,"active"),(0,d.lG)(f,"disabled"),(0,d.lG)(v,"error"),(0,d.lG)(m,"negative"),(0,d.lG)(g,"positive"),(0,d.lG)(w,"warning"),(0,d.X4)(Z),(0,d.Ok)(b),a),j=(0,u.Z)(y,e),N=(0,p.Z)(y,e);return h.kK(s)?l.createElement(N,(0,i.Z)({},j,{className:G}),(0,c.Z)(n,(function(e){return x.create(e,{defaultProps:{as:r}})}))):l.createElement(N,(0,i.Z)({},j,{className:G}),s)}y.handledProps=["active","as","cellAs","cells","children","className","disabled","error","negative","positive","textAlign","verticalAlign","warning"],y.defaultProps={as:"tr",cellAs:"td"},y.propTypes={},y.create=(0,m.u5)(y,(function(e){return{cells:e}}));var k=y;function P(e){var t=e.attached,r=e.basic,n=e.celled,s=e.children,a=e.className,f=e.collapsing,m=e.color,g=e.columns,Z=e.compact,x=e.definition,b=e.fixed,G=e.footerRow,N=e.headerRow,A=e.headerRows,y=e.inverted,R=e.padded,_=e.renderBodyRow,q=e.selectable,E=e.singleLine,C=e.size,T=e.sortable,H=e.stackable,z=e.striped,D=e.structured,L=e.tableData,O=e.textAlign,X=e.unstackable,B=e.verticalAlign,F=(0,o.Z)("ui",m,C,(0,d.lG)(n,"celled"),(0,d.lG)(f,"collapsing"),(0,d.lG)(x,"definition"),(0,d.lG)(b,"fixed"),(0,d.lG)(y,"inverted"),(0,d.lG)(q,"selectable"),(0,d.lG)(E,"single line"),(0,d.lG)(T,"sortable"),(0,d.lG)(H,"stackable"),(0,d.lG)(z,"striped"),(0,d.lG)(D,"structured"),(0,d.lG)(X,"unstackable"),(0,d.sU)(t,"attached"),(0,d.sU)(r,"basic"),(0,d.sU)(Z,"compact"),(0,d.sU)(R,"padded"),(0,d.X4)(O),(0,d.Ok)(B),(0,d.H0)(g,"column"),"table",a),K=(0,u.Z)(P,e),U=(0,p.Z)(P,e);if(!h.kK(s))return l.createElement(U,(0,i.Z)({},K,{className:F}),s);var I={defaultProps:{cellAs:"th"}},W=(N||A)&&l.createElement(w,null,k.create(N,I),(0,c.Z)(A,(function(e){return k.create(e,I)})));return l.createElement(U,(0,i.Z)({},K,{className:F}),W,l.createElement(v,null,_&&(0,c.Z)(L,(function(e,t){return k.create(_(e,t))}))),G&&l.createElement(j,null,k.create(G)))}P.handledProps=["as","attached","basic","celled","children","className","collapsing","color","columns","compact","definition","fixed","footerRow","headerRow","headerRows","inverted","padded","renderBodyRow","selectable","singleLine","size","sortable","stackable","striped","structured","tableData","textAlign","unstackable","verticalAlign"],P.defaultProps={as:"table"},P.propTypes={},P.Body=v,P.Cell=x,P.Footer=j,P.Header=w,P.HeaderCell=A,P.Row=k;var R=P,_=r(967),q=r(6215),E=r(3544),C=r(6392),T=r(1508);var H=function(e){var t=R.Row,r=R.Cell;function l(){return(l=(0,n.Z)((function(){var t,r;return(0,s.__generator)(this,(function(n){switch(n.label){case 0:return t=new C.Z(e.address),[4,T.Z.eth.getAccounts()];case 1:return r=n.sent(),[4,t.methods.approveRequest(e.id).send({from:r[0]})];case 2:return n.sent(),q.Router.pushRoute("/campaigns/".concat(e.address)),[2]}}))}))).apply(this,arguments)}function i(){return(i=(0,n.Z)((function(){var t,r;return(0,s.__generator)(this,(function(n){switch(n.label){case 0:return t=new C.Z(e.address),[4,T.Z.eth.getAccounts()];case 1:return r=n.sent(),[4,t.methods.finalizeRequest(e.id).send({from:r[0]})];case 2:return n.sent(),q.Router.pushRoute("/campaigns/".concat(e.address)),[2]}}))}))).apply(this,arguments)}return(0,a.jsxs)(t,{disabled:e.request.completed,positive:e.request.approvalCount>e.approversCount/2&&!e.request.completed,children:[(0,a.jsx)(r,{children:e.id}),(0,a.jsx)(r,{children:e.request.description}),(0,a.jsx)(r,{children:T.Z.utils.fromWei(e.request.value,"ether")}),(0,a.jsx)(r,{children:e.request.recipient}),(0,a.jsxs)(r,{children:[e.request.approvalCount,"/",e.approversCount]}),(0,a.jsx)(r,{children:e.request.completed?null:(0,a.jsx)(_.Z,{color:"green",onClick:function(){return l.apply(this,arguments)},children:"Approve"})}),(0,a.jsx)(r,{children:e.request.completed?null:(0,a.jsx)(_.Z,{color:"teal",onClick:function(){return i.apply(this,arguments)},children:"Finalize"})})]})};function z(e){var t=e.address,r=(0,C.Z)(t),i=R.Header,c=R.Row,o=R.HeaderCell,d=(R.Cell,R.Body),u=(0,l.useState)([]),p=u[0],h=u[1],f=(0,l.useState)(),v=f[0],m=f[1];return(0,l.useEffect)((function(){function e(){return(e=(0,n.Z)((function(){var e,t,n;return(0,s.__generator)(this,(function(s){switch(s.label){case 0:return[4,r.methods.approversCount().call()];case 1:return e=s.sent(),[4,r.methods.getRequestsCount().call()];case 2:return t=s.sent(),[4,Promise.all(Array(parseInt(t)).fill().map((function(e,t){return r.methods.requests(t).call()})))];case 3:return n=s.sent(),h(n),m(e),[2]}}))}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),(0,a.jsxs)(E.Z,{children:[(0,a.jsx)(q.Link,{route:"/campaigns/".concat(t,"/requests/new"),children:(0,a.jsx)("a",{children:(0,a.jsx)(_.Z,{primary:!0,children:"Add Request"})})}),(0,a.jsxs)(R,{children:[(0,a.jsx)(i,{children:(0,a.jsxs)(c,{children:[(0,a.jsx)(o,{children:"ID"}),(0,a.jsx)(o,{children:"Description"}),(0,a.jsx)(o,{children:"Amount"}),(0,a.jsx)(o,{children:"Recipient"}),(0,a.jsx)(o,{children:"Approval Count"}),(0,a.jsx)(o,{children:"Approve"}),(0,a.jsx)(o,{children:"Finalize"})]})}),(0,a.jsx)(d,{children:p.map((function(e,r){return(0,a.jsx)(H,{id:r,request:e,address:t,approversCount:v},r)}))})]}),(0,a.jsxs)("div",{children:["Found ",p.length," requests"]})]})}z.getInitialProps=function(){var e=(0,n.Z)((function(e){return(0,s.__generator)(this,(function(t){return[2,{address:e.query.address}]}))}));return function(t){return e.apply(this,arguments)}}();var D=z}},function(e){e.O(0,[774,543,576,553,888,179],(function(){return t=1369,e(e.s=t);var t}));var t=e.O();_N_E=t}]);